# 同工服侍分析提示词

本文档介绍新增的三个同工服侍分析提示词（Prompts），用于帮助教会管理者更好地了解和管理同工服侍情况。

## 📋 新增提示词列表

### 1. analyze_next_sunday_volunteers
**功能**：分析下周日有哪些同工服侍

**参数**：
- `date` (可选): 下周日日期（YYYY-MM-DD格式）
  - 如不提供，系统会自动计算下周日的日期

**用途**：
- 查看下周日所有服侍岗位的安排情况
- 了解哪些同工会在下周日服侍
- 识别是否有空缺岗位需要填补
- 提前了解服侍人员，便于沟通和协调

**使用示例**：
```python
# Claude Desktop 或 ChatGPT 中使用
使用 analyze_next_sunday_volunteers 提示词

# 或指定具体日期
使用 analyze_next_sunday_volunteers，日期为 2025-10-17
```

**分析内容**：
1. 列出所有服侍岗位及对应的同工
   - 敬拜主领、敬拜同工
   - 音响、投影、录影、直播
   - 翻译、招待、司事
   - 儿童主日学、安全等
2. 统计服侍人数和岗位覆盖情况
3. 识别空缺岗位
4. 列出每位同工的具体服侍内容

---

### 2. analyze_recent_volunteer_roles
**功能**：分析最近几周哪些同工在不同的事工岗位服事

**参数**：
- `weeks` (可选): 要分析的周数，默认4周
- `end_date` (可选): 结束日期（YYYY-MM-DD），默认为今天

**用途**：
- 了解同工在不同岗位的服侍情况
- 识别"多面手"同工（在多个岗位服侍）
- 发现岗位轮换模式
- 评估是否有岗位过于依赖个别同工

**使用示例**：
```python
# 分析最近4周
使用 analyze_recent_volunteer_roles 提示词

# 分析最近8周
使用 analyze_recent_volunteer_roles，周数为 8

# 分析特定日期范围
使用 analyze_recent_volunteer_roles，周数为 6，结束日期为 2025-10-10
```

**分析内容**：
1. 每位同工的服侍记录（姓名、日期、岗位、次数）
2. 识别"多面手"同工：
   - 在多个不同岗位服侍的同工
   - 每位同工服侍过的岗位清单
   - 服侍岗位数量统计
3. 岗位轮换分析：
   - 固定岗位的同工
   - 轮换岗位的同工
   - 轮换模式的合理性
4. 改进建议：
   - 培训机会建议
   - 依赖性风险提示

---

### 3. analyze_volunteer_frequency
**功能**：分析同工服侍频率，找出服侍过多或过少的同工

**参数**：
- `year` (可选): 要分析的年份（如2025），默认当前年份
- `start_date` (可选): 开始日期（YYYY-MM-DD）
- `end_date` (可选): 结束日期（YYYY-MM-DD）

**用途**：
- 统计每位同工的服侍频率
- 识别服侍负担过重的同工
- 发现服侍机会较少的同工
- 评估排班的均衡性
- 制定更合理的排班计划

**使用示例**：
```python
# 分析2025年全年
使用 analyze_volunteer_frequency 提示词，年份为 2025

# 分析特定时间段
使用 analyze_volunteer_frequency，开始日期为 2025-01-01，结束日期为 2025-06-30

# 分析当前年份（默认）
使用 analyze_volunteer_frequency 提示词
```

**分析内容**：
1. 服侍统计：
   - 总服侍次数
   - 平均服侍频率（每月几次）
   - 最近一次服侍日期
   - 岗位分布
2. 服侍负担分析：
   - 服侍过多的同工（每月超过2次或连续多周）
   - 服侍较少的同工（每月少于1次或长时间未服侍）
3. 均衡性评估：
   - 服侍次数的标准差和分布
   - 当前排班均衡度评估
   - 理想服侍频率范围
4. 改进建议：
   - 排班调整建议
   - 可以增加服侍的同工
   - 需要适当休息的同工
   - 新同工培训计划
5. 按岗位分析：
   - 每个岗位的同工人数
   - 每个岗位的平均服侍频率
   - 人手不足的岗位

---

## 🚀 使用场景

### 场景1：周中准备
**问题**：想提前了解下周日的服侍安排
```
使用 analyze_next_sunday_volunteers 提示词
```

### 场景2：同工关怀
**问题**：想知道哪些同工最近服侍较多，可能需要休息
```
使用 analyze_volunteer_frequency 提示词，开始日期为 2025-09-01，结束日期为 2025-10-10
```

### 场景3：岗位规划
**问题**：想了解同工在不同岗位的服侍能力，便于培训和岗位调配
```
使用 analyze_recent_volunteer_roles 提示词，周数为 12
```

### 场景4：年度评估
**问题**：想评估全年的同工服侍情况
```
使用 analyze_volunteer_frequency 提示词，年份为 2025
```

---

## 📊 预期输出

### analyze_next_sunday_volunteers 输出示例
```
下周日（2025-10-17）同工服侍安排：

✅ 敬拜主领：张三
✅ 敬拜同工：李四、王五、赵六
✅ 音响：孙七
✅ 投影：周八
✅ 录影：吴九
⚠️ 直播：【空缺】
✅ 翻译：郑十
✅ 招待：刘一、陈二
✅ 司事：林三、黄四

服侍人数：12人
岗位覆盖：11/12（91.7%）
空缺岗位：直播
```

### analyze_recent_volunteer_roles 输出示例
```
最近4周同工岗位分布（2025-09-12 至 2025-10-10）：

【多面手同工】
1. 张三：3个岗位（敬拜主领、音响、翻译）- 服侍4次
2. 李四：2个岗位（敬拜同工、招待）- 服侍3次

【固定岗位同工】
1. 王五：敬拜同工（固定）- 服侍4次
2. 赵六：投影（固定）- 服侍4次

【轮换建议】
- 建议培训王五学习投影，增加岗位灵活性
- 赵六可以考虑轮换到其他技术岗位（如录影）
```

### analyze_volunteer_frequency 输出示例
```
2025年同工服侍频率分析：

【服侍过多】（需要关怀）
1. 张三：服侍12次（平均每月2.4次）- 最近连续4周服侍
2. 李四：服侍10次（平均每月2次）

【服侍均衡】
1. 王五：服侍6次（平均每月1.2次）
2. 赵六：服侍5次（平均每月1次）

【服侍较少】（可以增加）
1. 孙七：服侍2次（平均每月0.4次）- 上次服侍：2个月前
2. 周八：服侍1次（平均每月0.2次）

【均衡性评估】
- 标准差：3.2次
- 均衡度：中等
- 建议理想频率：每月1-1.5次

【按岗位分析】
- 敬拜主领：4人，平均每月1.5次（均衡）
- 音响：3人，平均每月2次（偏高，建议增加人手）
- 投影：5人，平均每月0.8次（均衡）
```

---

## 🔧 技术实现

这些提示词基于以下 MCP 工具和资源：

### 使用的工具
- `query_volunteers_by_date`: 查询指定日期的同工安排
- `query_date_range`: 查询日期范围内的服侍记录

### 使用的资源
- `ministry://volunteer/assignments`: 同工服侍安排
- `ministry://stats/volunteers`: 同工统计信息

### 数据来源
- 从 Google Sheets 同步的同工服侍数据
- 经过清洗和标准化的服务层数据
- 支持 GCS (Google Cloud Storage) 和本地文件存储

---

## 💡 最佳实践

1. **定期检查**：建议每周使用 `analyze_next_sunday_volunteers` 检查下周安排
2. **月度回顾**：每月使用 `analyze_volunteer_frequency` 回顾服侍情况
3. **季度评估**：每季度使用 `analyze_recent_volunteer_roles` 评估岗位分布
4. **关怀为先**：发现服侍频繁的同工，及时关怀和沟通
5. **培训机会**：根据分析结果，制定同工培训计划
6. **均衡排班**：使用分析结果优化未来的排班安排

---

## 📝 注意事项

1. **日期格式**：所有日期必须使用 YYYY-MM-DD 格式（如：2025-10-17）
2. **数据更新**：确保 Google Sheets 数据是最新的，必要时先运行数据同步
3. **中文支持**：系统完全支持中文人名和岗位名称
4. **隐私保护**：分析结果仅供教会内部管理使用，请妥善保管
5. **灵活性**：所有参数都是可选的，系统会使用合理的默认值

---

## 🆘 常见问题

**Q: 如何知道下周日的日期？**
A: 不需要手动计算，直接使用 `analyze_next_sunday_volunteers` 不带参数即可，系统会自动计算。

**Q: 分析结果显示"数据未找到"怎么办？**
A: 可能需要先运行数据同步。使用 `sync_from_gcs` 工具或 `generate_service_layer` 工具生成最新数据。

**Q: 可以分析特定岗位的服侍频率吗？**
A: 目前 `analyze_volunteer_frequency` 会分析所有岗位，你可以在得到结果后，要求 AI 只关注特定岗位。

**Q: 如何导出分析结果？**
A: 在 Claude Desktop 或 ChatGPT 中，可以直接复制分析结果。也可以要求 AI 以特定格式（如表格、CSV）输出。

---

## 🎯 未来改进方向

1. 添加可视化图表支持
2. 支持自定义服侍频率阈值
3. 添加邮件通知功能（提醒服侍安排）
4. 支持同工请假和不可用日期管理
5. 添加同工技能和培训记录
6. 支持多语言（英文、中文等）

---

## 📚 相关文档

- [MCP 集成指南](./docs/MCP_INTEGRATION.md)
- [快速开始](./docs/QUICKSTART.md)
- [API 端点](./docs/API_ENDPOINTS.md)
- [同工元数据设置指南](./docs/VOLUNTEER_METADATA_SETUP_GUIDE.md)

---

**最后更新**：2025-10-10
**作者**：Grace Irvine Ministry Management System

