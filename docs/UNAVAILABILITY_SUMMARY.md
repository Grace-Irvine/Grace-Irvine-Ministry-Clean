# åŒå·¥ä¸å¯ç”¨æ—¶é—´æ ‡æ³¨ - åŠŸèƒ½è¯´æ˜

## âœ… å·²éªŒè¯åŠŸèƒ½

ç³»ç»Ÿå·²å®Œå…¨æ”¯æŒä¸¤ç§ä¸å¯ç”¨æƒ…å†µçš„æ ‡æ³¨å’Œè‡ªåŠ¨å¤„ç†ã€‚

---

## ğŸ“‹ ä¸¤ç§æƒ…å†µçš„æ ‡æ³¨æ–¹æ³•

### æƒ…å†µ1ï¼šä¸´æ—¶ä¸å¯ç”¨ï¼ˆæœ‰æ˜ç¡®ç»“æŸæ—¥æœŸï¼‰

**é€‚ç”¨**ï¼šçŸ­æœŸæ—…è¡Œã€å‡ºå·®ã€åŸ¹è®­ç­‰æœ‰æ˜ç¡®æ¢å¤æ—¥æœŸçš„æƒ…å†µ

**æ ‡æ³¨ç¤ºä¾‹**ï¼š
```
person_id:          person_8101_è°¢è‹—
person_name:        è°¢è‹—
unavailable_start:  2025-11-01
unavailable_end:    2025-11-15
unavailable_reason: æ—…è¡Œ
notes:              (å¯é€‰)
```

**ç³»ç»Ÿè¡Œä¸º**ï¼š
- âœ… åœ¨ 2025-11-01 è‡³ 2025-11-15 æœŸé—´ï¼Œæ’ç­å»ºè®®ä¼šè‡ªåŠ¨æ’é™¤è¯¥åŒå·¥
- âœ… 11æœˆ16æ—¥åè‡ªåŠ¨æ¢å¤å¯ç”¨çŠ¶æ€
- âœ… `is_available` å­—æ®µæ ¹æ®å½“å‰æ—¥æœŸè‡ªåŠ¨è®¡ç®—

---

### æƒ…å†µ2ï¼šé•¿æœŸ/æ— é™æœŸä¸å¯ç”¨

**é€‚ç”¨**ï¼šé•¿æœŸç”Ÿç—…ã€å·¥ä½œç¹å¿™ã€æš‚åœæœä¾ã€é€€å‡ºå›¢é˜Ÿç­‰æ— æ˜ç¡®æ¢å¤æ—¥æœŸçš„æƒ…å†µ

**æ ‡æ³¨ç¤ºä¾‹**ï¼š
```
person_id:          person_6878_æœå¾·åŒ
person_name:        æœå¾·åŒ
unavailable_start:  2025-10-01
unavailable_end:    2099-12-31        â† ä½¿ç”¨è¿œæœŸæ—¥æœŸ
unavailable_reason: é•¿æœŸä¼‘æ¯
notes:              å·¥ä½œç¹å¿™ï¼Œæš‚åœæœä¾ï¼Œæ¢å¤æ—¶é—´æœªå®š
```

**ç³»ç»Ÿè¡Œä¸º**ï¼š
- âœ… åœ¨æ‰€æœ‰æ’ç­å»ºè®®ä¸­æ°¸ä¹…æ’é™¤è¯¥åŒå·¥ï¼ˆç›´åˆ°æ‰‹åŠ¨æ›´æ–°ï¼‰
- âœ… `is_available` æ˜¾ç¤ºä¸º `false`
- âœ… LLM èƒ½å¤Ÿæ¸…æ¥šè¯†åˆ«è¯¥åŒå·¥é•¿æœŸä¸å¯ç”¨

---

## ğŸ§ª éªŒè¯æµ‹è¯•

### æµ‹è¯•1ï¼šä¸´æ—¶ä¸å¯ç”¨
```bash
# è°¢è‹—åœ¨ 11æœˆ1-15æ—¥ æ—…è¡Œ
# æŸ¥è¯¢ 11æœˆ10æ—¥ çš„æ’ç­å»ºè®®
curl -X POST http://localhost:8080/api/v1/volunteer/suggestions \
  -d '{"service_date": "2025-11-10", "required_roles": ["éŸ³æ§"], "consider_availability": true}'

# ç»“æœï¼šâœ“ è°¢è‹—å·²è¢«æ’é™¤
```

### æµ‹è¯•2ï¼šé•¿æœŸä¸å¯ç”¨
```bash
# æœå¾·åŒé•¿æœŸä¼‘æ¯ï¼ˆ2099-12-31ï¼‰
# æŸ¥è¯¢ä»»æ„æ—¥æœŸçš„æ’ç­å»ºè®®
curl -X POST http://localhost:8080/api/v1/volunteer/suggestions \
  -d '{"service_date": "2025-12-25", "required_roles": ["å¸ç´"], "consider_availability": true}'

# ç»“æœï¼šâœ“ æœå¾·åŒå·²è¢«æ’é™¤
```

### æµ‹è¯•3ï¼šå…ƒæ•°æ®æŸ¥è¯¢
```bash
# æŸ¥çœ‹æ‰€æœ‰ä¸å¯ç”¨çš„åŒå·¥
curl http://localhost:8080/api/v1/volunteer/metadata | \
  jq '.volunteers[] | select(.is_available == false)'

# ç»“æœï¼šæ˜¾ç¤ºæ‰€æœ‰é•¿æœŸä¸å¯ç”¨çš„åŒå·¥
```

---

## ğŸ¤– LLM ä½¿ç”¨è¯´æ˜

### å¦‚ä½•è®© LLM è¯†åˆ«ä¸å¯ç”¨çŠ¶æ€

**1. åœ¨è¯·æ±‚æ’ç­å»ºè®®æ—¶ï¼ŒåŠ¡å¿…è®¾ç½®ï¼š**
```json
{
  "service_date": "2025-11-10",
  "required_roles": ["éŸ³æ§", "å¸ç´"],
  "consider_availability": true  // â† å¿…é¡»ä¸º true
}
```

**2. ç³»ç»Ÿä¼šè‡ªåŠ¨ï¼š**
- æ£€æŸ¥æ¯ä¸ªåŒå·¥åœ¨æŒ‡å®šæ—¥æœŸæ˜¯å¦å¯ç”¨
- ä¸å¯ç”¨çš„åŒå·¥è¯„åˆ†ç›´æ¥ -100ï¼ˆæ’é™¤ï¼‰
- åœ¨ `concerns` ä¸­è¯´æ˜ä¸å¯ç”¨åŸå› 

**3. LLM å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "person_id": "person_8101_è°¢è‹—",
  "person_name": "è°¢è‹—",
  "score": -50,  // â† åˆ†æ•°ä¸ºè´Ÿï¼Œä¸ä¼šå‡ºç°åœ¨å»ºè®®ä¸­
  "concerns": [
    "æ—¶é—´ä¸å¯ç”¨ï¼ˆæ—…è¡Œï¼‰"  // â† æ˜ç¡®å‘ŠçŸ¥åŸå› 
  ]
}
```

**4. å‘ç”¨æˆ·è§£é‡Šæ—¶ï¼š**
```
"è°¢è‹—åœ¨ 11æœˆ1æ—¥è‡³15æ—¥æœŸé—´æ—…è¡Œï¼Œå› æ­¤æ— æ³•å‚ä¸æœ¬æ¬¡æœä¾ã€‚
ç³»ç»Ÿå·²è‡ªåŠ¨æ’é™¤ä»–ï¼Œå¹¶æ¨èæ˜æ˜ä½œä¸ºæ›¿ä»£äººé€‰ã€‚"
```

---

## ğŸ“ Google Sheets å¡«å†™è¯´æ˜

### åœ¨å“ªé‡Œå¡«å†™

1. æ‰“å¼€ Google Sheetsï¼š
   ```
   https://docs.google.com/spreadsheets/d/1ypiXsdrfOrWxsAVJxQfZVwA0qtzRzb-siGiV2vixuoc/edit
   ```

2. æ‰¾åˆ° `VolunteerMetadata` sheet

3. æ‰¾åˆ°å¯¹åº”åŒå·¥çš„è¡Œï¼ˆæŒ‰ `Ctrl+F` æœç´¢å§“åï¼‰

4. å¡«å†™ä»¥ä¸‹åˆ—ï¼š

| åˆ—å | ä¸´æ—¶ä¸å¯ç”¨ | é•¿æœŸä¸å¯ç”¨ |
|------|-----------|-----------|
| `unavailable_start` | å®é™…å¼€å§‹æ—¥æœŸ | å½“å‰æ—¥æœŸ |
| `unavailable_end` | å®é™…ç»“æŸæ—¥æœŸ | `2099-12-31` |
| `unavailable_reason` | ç®€çŸ­åŸå› ï¼ˆæ—…è¡Œï¼‰ | ç®€çŸ­åŸå› ï¼ˆé•¿æœŸä¼‘æ¯ï¼‰ |
| `notes` | (å¯é€‰) | è¯¦ç»†è¯´æ˜å’Œæ¢å¤è®¡åˆ’ |

### æ—¥æœŸæ ¼å¼

**âœ… æ­£ç¡®æ ¼å¼**ï¼š
- `2025-11-01`
- `2025-12-25`
- `2099-12-31`

**âŒ é”™è¯¯æ ¼å¼**ï¼š
- `11/01/2025`ï¼ˆä¸æ”¯æŒï¼‰
- `2025/11/01`ï¼ˆä¸æ”¯æŒï¼‰
- `æ°¸ä¹…`ï¼ˆä¸èƒ½ç”¨æ–‡å­—ï¼‰

---

## ğŸ”„ æ¢å¤æœä¾

å½“åŒå·¥æ¢å¤æœä¾æ—¶ï¼š

### æ–¹æ³•1ï¼šæ›´æ–°ç»“æŸæ—¥æœŸï¼ˆæ¨èï¼‰
```
unavailable_end: 2099-12-31  â†’  2025-12-15
```

### æ–¹æ³•2ï¼šæ¸…ç©ºå­—æ®µ
```
unavailable_start: (æ¸…ç©º)
unavailable_end:   (æ¸…ç©º)
unavailable_reason: (æ¸…ç©º)
notes: å·²äº2025-12-15æ¢å¤æœä¾
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

### âœ… æ¨èåšæ³•

1. **åŠæ—¶æ›´æ–°**ï¼šåŒå·¥é€šçŸ¥ä¸å¯ç”¨åç«‹å³æ›´æ–°
2. **æ˜ç¡®åŸå› **ï¼šå¡«å†™æ¸…æ™°çš„ `unavailable_reason`
3. **è¯¦ç»†å¤‡æ³¨**ï¼šé•¿æœŸä¸å¯ç”¨åœ¨ `notes` ä¸­è¯´æ˜è¯¦æƒ…
4. **å®šæœŸæ£€æŸ¥**ï¼šæ¯æœˆæ£€æŸ¥é•¿æœŸä¸å¯ç”¨çš„åŒå·¥
5. **è¿è¡ŒéªŒè¯**ï¼šæ›´æ–°åè¿è¡Œå†²çªæ£€æµ‹

### âŒ é¿å…åšæ³•

1. âŒ ä½¿ç”¨æ–‡å­—æ—¥æœŸï¼ˆ"ä¸‹å‘¨"ã€"æ°¸ä¹…"ï¼‰
2. âŒ ç•™ç©º `unavailable_reason`
3. âŒ å¿˜è®°æ›´æ–°æ¢å¤åçš„çŠ¶æ€
4. âŒ ç›´æ¥åˆ é™¤åŒå·¥è®°å½•

---

## ğŸ¯ å¸¸è§åœºæ™¯

### åœºæ™¯1ï¼šåŒå·¥æå‰1ä¸ªæœˆé€šçŸ¥æ—…è¡Œ
```
unavailable_start: 2025-11-01
unavailable_end:   2025-11-15
reason:           æ—…è¡Œ
```

### åœºæ™¯2ï¼šåŒå·¥çªç„¶ç”Ÿç—…ï¼Œæ¢å¤æ—¶é—´æœªå®š
```
unavailable_start: 2025-10-07
unavailable_end:   2099-12-31
reason:           èº«ä½“åŸå› 
notes:            é•¿æœŸä¼‘å…»ï¼Œæ¢å¤æ—¶é—´å¾…å®š
```

### åœºæ™¯3ï¼šåŒå·¥å·¥ä½œç¹å¿™ï¼Œæš‚åœæœä¾
```
unavailable_start: 2025-10-01
unavailable_end:   2099-12-31
reason:           å·¥ä½œåŸå› 
notes:            å·¥ä½œç¹å¿™ï¼Œæš‚åœæœä¾ï¼Œæ˜å¹´å†è¯„ä¼°
```

### åœºæ™¯4ï¼šåŒå·¥äº§å‡
```
unavailable_start: 2025-11-01
unavailable_end:   2099-12-31
reason:           äº§å‡
notes:            é¢„äº§æœŸ11æœˆï¼Œäº§å3-6ä¸ªæœˆæ¢å¤
```

### åœºæ™¯5ï¼šåŒå·¥ç¦»å¼€æ•™ä¼š
```
unavailable_start: 2025-08-01
unavailable_end:   2099-12-31
reason:           é€€å‡ºæœä¾
notes:            å·²ä¸åœ¨æœ¬æ•™ä¼š
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **å®Œæ•´æŒ‡å—**ï¼š`docs/UNAVAILABILITY_GUIDE.md`ï¼ˆåŒ…å«è¯¦ç»†çš„ API è¯´æ˜ã€æµ‹è¯•æ–¹æ³•ç­‰ï¼‰
- **å¿«é€Ÿå‚è€ƒ**ï¼š`UNAVAILABILITY_QUICK_REF.md`ï¼ˆé€ŸæŸ¥è¡¨ï¼‰
- **API æ–‡æ¡£**ï¼š`docs/API_ENDPOINTS.md`
- **è®¾ç½®æŒ‡å—**ï¼š`VOLUNTEER_METADATA_SETUP_GUIDE.md`

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

```bash
# 1. åœ¨ Google Sheets ä¸­å¡«å†™ä¸å¯ç”¨ä¿¡æ¯
# 2. éªŒè¯æ•°æ®
curl "http://localhost:8080/api/v1/volunteer/metadata?person_id=person_8101_è°¢è‹—" | jq

# 3. æµ‹è¯•æ’ç­å»ºè®®
curl -X POST http://localhost:8080/api/v1/volunteer/suggestions \
  -H "Content-Type: application/json" \
  -d '{
    "service_date": "2025-11-10",
    "required_roles": ["éŸ³æ§"],
    "consider_availability": true
  }' | jq

# 4. è¿è¡Œå†²çªæ£€æµ‹
curl -X POST http://localhost:8080/api/v1/volunteer/conflicts \
  -H "Content-Type: application/json" \
  -d '{"year_month": "2025-11", "check_availability": true}' | jq
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åŠŸèƒ½çŠ¶æ€**: âœ… å·²æµ‹è¯•å¹¶éªŒè¯  
**æœ€åæ›´æ–°**: 2025-10-07

